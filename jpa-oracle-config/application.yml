spring:
  application:
    name: jpa-oracle-source

  cloud:
    vault:
      enabled: false

    # IMPORTANT: keep this set to avoid the connector framework hitting null definition paths
    # and to ensure the workflow setup function is part of the catalog.
    function:
      definition: mapPayloads

    stream:
      defaultBinder: solace
      binders:
        solace:
          type: solace
          environment:
            solace:
              java:
                host: ${SOLACE_HOST}
                msgVpn: ${SOLACE_VPN}
                clientUsername: ${SOLACE_USERNAME}
                clientPassword: ${SOLACE_PASSWORD}

solace:
  java:
    host: ${SOLACE_HOST}
    msgVpn: ${SOLACE_VPN}
    clientUsername: ${SOLACE_USERNAME}
    clientPassword: ${SOLACE_PASSWORD}
    connect-retries: -1
    reconnect-retries: -1

  connector:
    management:
      leader-election:
        mode: standalone
      session:
        host: ${SOLACE_HOST}
        msgVpn: ${SOLACE_VPN}
        clientUsername: ${SOLACE_USERNAME}
        clientPassword: ${SOLACE_PASSWORD}

    security:
      enabled: false

    workflows:
          - name: test_identification
            enabled: true
            source:
              type: database
              databaseRef: source
              table: TEST_IDENTIFICATION
              polling:
                intervalMs: 1000
            target:
              type: solace
              destinationType: topic
              topic: db/oracle/test_identification

          - name: test_metrics
            enabled: true
            source:
              type: database
              databaseRef: source
              table: TEST_METRICS
              polling:
                intervalMs: 1000
            target:
              type: solace
              destinationType: topic
              topic: db/oracle/test_metrics

solace-persistence:
  datasource:
    driver-class-name: oracle.jdbc.OracleDriver
    url: ${ORACLE_JDBC_URL}
    username: ${ORACLE_USERNAME}
    password: ${ORACLE_PASSWORD}
    hikari:
      initializationFailTimeout: -1
      connection-timeout: 5000

  source:
    dbQueryMode: jpa
    sendBatchSize: 1
    queryMax: 100
    triggerInterval: 2000

management:
  observations:
    enabled: false
  tracing:
    enabled: false
  datadog:
    metrics:
      export:
        enabled: false
  influx:
    metrics:
      export:
        enabled: false
  dynatrace:
    metrics:
      export:
        enabled: false
  otlp:
    metrics:
      export:
        enabled: false
  metrics:
    export:
      influx:
        enabled: false
      dynatrace:
        enabled: false
      otlp:
        enabled: false

debug: true
logging:
  level:
    root: INFO
    com.solace.connector.core: DEBUG
    org.springframework.cloud.stream: INFO
    org.springframework.boot.context.config: TRACE
    org.springframework.core.env: TRACE