spring:
  application:
    name: jpa-postgres-target

  # DB (Postgres) - your confirmed creds/db
  datasource:
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://postgres:5432/postgres
    username: postgres
    password: postgres

  jpa:
    hibernate:
      ddl-auto: none
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

# Avoid Spring Cloud Config checks
spring:
  cloud:
    config:
      enabled: false
      import-check:
        enabled: false

# Disable metrics exporters that were killing startup
management:
  observations:
    enabled: false
  tracing:
    enabled: false
  datadog:
    metrics:
      export:
        enabled: false
  dynatrace:
    metrics:
      export:
        enabled: false
  influx:
    metrics:
      export:
        enabled: false
  prometheus:
    metrics:
      export:
        enabled: false
  graphite:
    metrics:
      export:
        enabled: false
  atlas:
    metrics:
      export:
        enabled: false

# --- Solace Connector core config ---
solace:
  connector:
    # REQUIRED: at least one workflow enabled (fixes: “At least 1 workflow must be enabled”)
    workflows:
      - name: postgres-sink
        enabled: true

# --- Connector-specific DB sink config ---
solace-persistence:
  # Tell the connector where to find connector_config.properties
  # (this is how the Database Connector loads mapping + queue/topic rules)
  config:
    propertiesFile: file:/app/external/spring/config/connector_config.properties

  # Sink behavior
  sink:
    db-crud-mode: jpa
    jpaBatchMode: true
    jpaBatchSize: 25
    jpaMaxRetry: 3
    jpaRetryWaitMilliseconds: 3000
    payloadFormat: json
